# 项目开发记录

## 基本原则
- 请在工作开始前确保正确加载应用全部规则
- 本记录仅存放本次任务的重要信息 

## 需求分析
需求：创建两个版本的插件界面：一个使用简体中文，另一个使用繁体中文。
目标：允许用户在简体中文和繁体中文之间进行切换，且设置能够被保存。

## 工作计划

1. **设计语言系统框架**
   - ✅ 分析现有代码，了解用户界面实现方式
   - ⏱️ 设计一个多语言支持系统
   - ⏱️ 创建语言资源文件，分别存储简体中文和繁体中文字符串

2. **实现语言切换机制**
   - ⏱️ 创建一个语言管理器类（LanguageManager）
   - ⏱️ 在Config中添加语言设置选项
   - ⏱️ 实现语言切换接口和回调机制

3. **用户界面适配**
   - ⏱️ 修改UI相关代码，使用语言资源而不是硬编码字符串
   - ⏱️ 在设置界面中添加语言切换选项
   - ⏱️ 确保界面元素在切换语言后正确刷新

4. **文本转换实现**
   - ⏱️ 实现简体/繁体中文转换功能
   - ⏱️ 添加繁体中文资源或实时转换功能

## 规范事项

1. **文件命名规范**
   - 简体中文版：BH_SC.dll
   - 繁体中文版：BH_TC.dll
   - 资源文件命名：strings_sc.json, strings_tc.json

2. **代码实现规范**
   - 所有界面文本通过语言管理器获取，避免硬编码
   - 确保字符编码使用UTF-8，防止中文乱码
   - 保持代码注释的双语一致性
   - 确保字体支持简繁中文显示

3. **配置项规范**
   - 在配置文件中添加"Language"选项，值为"SC"或"TC"
   - 首次启动时根据系统区域设置默认语言

## 下一步任务

1. ⏱️ **创建语言资源系统**
   - 创建Language.h和Language.cpp
   - 设计字符串ID枚举表
   - 定义语言管理接口和实现

2. ⏱️ **提取所有界面文本**
   - 从现有代码中提取所有硬编码文本
   - 整理为字符串ID和对应的文本值

3. ⏱️ **实现设置界面**
   - 在GameSettings模块中添加语言切换选项
   - 添加语言切换按钮和相关逻辑

4. ⏱️ **实现繁体中文转换**
   - 研究并实现简繁转换算法或引入第三方库
   - 测试转换结果的准确性

## 进度跟踪

⚙️ **分析阶段**
- ✅ 完成代码库初步分析
- ✅ 理解用户界面实现方式
- ✅ 确定核心修改点

## 重要信息

1. **关键文件**:
   - BH.h/BH.cpp：插件主入口
   - Config.h/Config.cpp：配置系统
   - Drawing/UI：用户界面系统
   - Modules/GameSettings：设置界面

2. **技术方案**:
   - 方案A：创建两个独立的DLL文件（一个简体、一个繁体）
   - 方案B：创建单一DLL，内置语言切换功能（推荐）

3. **修改点分析**:
   - 需要修改硬编码的文本显示方式
   - 需要添加语言配置项
   - 需要实现语言资源加载机制
   - 可能需要调整UI布局以适应不同长度的文本

4. **简繁转换方法**:
   - 使用预定义映射表进行字符转换
   - 或使用OpenCC等开源库进行转换
   - 或预先准备两套完整的文本资源文件

## 错误处理方案


